!function(e,t,o){"use strict";function s(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}var r=s(t),n=s(o),a={routerChange:function(){},tipMessage:function(e){alert(e)},timeout:3e5,hasToken:!1,tokenError:1010},c=r.default.create(a);function i(e,t){const o=sessionStorage.getItem("token");a.hasToken&&!o&&g();const s=a.hasToken?{token:o}:{};let r=n.default.stringify(Object.assign({},s,t));const i=e;return new Promise(((e,t)=>{c.get(i+"?"+r).then((t=>{const o=t.data;o.code==a.tokenError?(l(o.desc),sessionStorage.clear(),localStorage.clear(),g()):e(o)})).catch((e=>{t(e.data)}))}))}function u(e,t){const o=sessionStorage.getItem("token");a.hasToken&&!o&&g();const s=a.hasToken?{token:o}:{};let r=n.default.stringify(Object.assign({},s,t));const i=e;return new Promise(((e,t)=>{c.post(i,r).then((t=>{const o=t.data;o.code==a.tokenError?(l(o.desc),sessionStorage.clear(),localStorage.clear(),g()):e(o)})).catch((e=>{t(e.data)}))}))}c.interceptors.request.use((e=>{if(a.hasToken){const t=sessionStorage.getItem("token");t&&(e.headers.Authorization=t)}return e}),(e=>Promise.error(e))),c.interceptors.response.use((e=>200===e.status?Promise.resolve(e):Promise.reject(e)),(e=>{const{response:t}=e;return t?(f(t.status,t.data.message),Promise.reject(t)):Promise.reject(e)}));const l=e=>{a.tipMessage(e)},g=()=>{a.routerChange()},f=(e,t)=>{switch(e){case 401:g();break;case a.tokenError:l("登录信息已过期，请重新登录！"),sessionStorage.removeItem("token"),setTimeout((()=>{g()}),1e3);break;case 404:l("请求的资源不存在");break;case 500:l("服务器出错");break;default:console.log(t)}};let d={install:function(e){e.prototype.$post=u,e.prototype.$get=i}};d.defaultConfig=a,e.default=d,Object.defineProperty(e,"__esModule",{value:!0})}(this["vue2-axios"]=this["vue2-axios"]||{},axios,qs);
